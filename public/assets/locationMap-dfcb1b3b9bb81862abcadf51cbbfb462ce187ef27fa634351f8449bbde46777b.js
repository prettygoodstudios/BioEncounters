mapboxgl.accessToken="pk.eyJ1IjoicHJldHR5Z29vZHN0dWRpb3MiLCJhIjoiY2pkamx4aTZlMWt4dDJwbnF5a3ZmbTEzcyJ9.lu_9eqO1kmUMPf9LXU80yg";let map=new mapboxgl.Map({container:"locoMap",style:"mapbox://styles/prettygoodstudios/cjiwl3mup71c72rmsfn9xeupa"});fetch(`${ROOT_URL}geoapi`).then(e=>e.json()).then(e=>{e.forEach(e=>{let t=document.createElement("div");t.className="marker",t.innerHTML=1!=e.encounters?`<div class="marker-alert">${e.encounters}</div>`:"";let o=new mapboxgl.Marker(t,{offset:[0,-35]}).setLngLat([e.longitude,e.latitude]).addTo(map),a=`<h3>${e.city}</h3>`,n=`<p>${e.full_address}</p>`,s=`<a href="${ROOT_URL}location/${e.id}" class="green-button">View</a>`,l=(new mapboxgl.Popup).setHTML(a+n+s);o.setPopup(l)})}),map.on("style.load",function(){map.style.stylesheet.layers.forEach(function(e){"symbol"===e.type&&map.removeLayer(e.id)})});let observer=new MutationObserver(()=>{document.querySelector(".mapboxgl-canvas-container")&&map.flyTo({center:[LOCATION[1],LOCATION[0]],zoom:ZOOM})});observer.observe(document,{childList:!0,subtree:!0});