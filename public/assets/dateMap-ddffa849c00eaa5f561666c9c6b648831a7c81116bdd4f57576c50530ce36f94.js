mapboxgl.accessToken="pk.eyJ1IjoicHJldHR5Z29vZHN0dWRpb3MiLCJhIjoiY2pkamx4aTZlMWt4dDJwbnF5a3ZmbTEzcyJ9.lu_9eqO1kmUMPf9LXU80yg";let map=new mapboxgl.Map({container:"locoMap",style:"mapbox://styles/prettygoodstudios/cjiwl3mup71c72rmsfn9xeupa",scrollZoom:window.innerWidth>900}),nav=new mapboxgl.NavigationControl;map.addControl(nav,"top-left"),fetch(`${ROOT_URL}${PATH}`).then(o=>o.json()).then(o=>{let e=[];o.forEach(o=>{let n=-1;if(e.forEach((e,t)=>{o.location_id==e.location_id&&(n=t)}),-1==n){const n={location_id:o.location_id,latitude:o.latitude,longitude:o.longitude,city:o.city,encounters:[o]};e.push(n)}else e[n].encounters.push(o)}),console.log(e),e.forEach(o=>{let e=document.createElement("div");e.className="marker",e.innerHTML=1!=o.encounters.length?`<div class="marker-alert">${o.encounters.length}</div>`:"";let n=new mapboxgl.Marker(e,{offset:[0,-35]}).setLngLat([o.longitude,o.latitude]).addTo(map);const t=`<h3>${o.city}</h3>`,l=`<p>${o.encounters.length} Encounter${1!=o.encounters.length?"s":""}</p>`,a=o.encounters.map(o=>`<p><strong>${o.common}</strong> - <i>${o.description}</i></p>`).join(""),i=`<a href="${ROOT_URL}location/${o.location_id}" class="green-button">View More From This Location</a>`,c=(new mapboxgl.Popup).setHTML(t+l+a+i);n.setPopup(c)}),map.flyTo({center:[o[0].longitude,o[0].latitude],zoom:6})}),window.onresize=(()=>{console.log(map),window.innerWidth>900?map.scrollZoom.enable():map.scrollZoom.disable()});